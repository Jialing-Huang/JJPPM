@using JJPPM.Models
@model List<JTask>

@* @functions{
  private readonly ApplicationDbContext _db;

  public async Task<IActionResult> OnGetDelete(int id)  //How to know the method AND does it connect to delete function
    {
      JTask task = await _db.Tasks.FindAsync(id);

      if (task != null)
      {
        _db.Remove(task);
        await _db.SaveChangesAsync();
      }

      return Page();
    }
} *@

@{
  string cardHeaderStyle = "";
  string cardBorderStyle = "";
  string cardTextColor = "text-primary";
}
<div class="project-board-bg-color rounded p-2" style="height: fit-content; width: 32%;">
  <div class="text-center"><h4 class="text-dark">@ViewData["TaskStatus"]?.ToString()</h4></div>
  @foreach (var task in Model)
  {
    @switch (@task.TaskPriority.Id)
    {
      case 1: 
        cardBorderStyle = "border-secondary";
        cardHeaderStyle = "bg-right text-secondary";
        cardTextColor = "text-secondary";
        break;
      case 2:
        cardBorderStyle = "border-secondary";
        cardHeaderStyle = "bg-secondary text-white";
        cardTextColor = "text-secondary";
        break;
      default :
        cardBorderStyle = "border-primary";
        cardHeaderStyle = "bg-primary text-white";
        cardTextColor = "text-primary";
        break;
    }  
    <div class="card @cardBorderStyle mb-2">
      <div class="card-header @cardHeaderStyle py-1"><small>@task.DueDate</small></div>
      <div class="card-body @cardTextColor">
        <p class="card-text">@task.Description</p>
      </div>
      <div class="card-footer text-right py-0 task-footer">
        <a class="btn btn-sm" asp-page="/TaskUpdate" asp-route-id="@task.Id" data-toggle="tooltip" data-placement="top" title="Update">
          <i class="fas fa-edit"></i>
        </a>
        <a class="btn btn-sm" data-toggle="tooltip" data-placement="top" title="Remove" asp-page="/TaskDelete" asp-route-id="@task.Id">
          <i class="fas fa-remove"></i>
        </a>
      </div>
    </div>
  }
</div>